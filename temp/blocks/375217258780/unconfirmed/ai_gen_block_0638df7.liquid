{% doc %}
  @prompt
    Generate a product collection component. Custom labels can be added to the top left corner, and products can still be added to the cart normally., Components for a collection of products, Customizable tag text
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-custom-tag-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: {{ block.settings.padding_vertical }}px {{ block.settings.padding_horizontal }}px;
    background: {{ block.settings.background_color }};
    color: {{ block.settings.text_color }};
    font-size: {{ block.settings.font_size }}px;
    font-weight: {{ block.settings.font_weight }};
    text-transform: {{ block.settings.text_transform }};
    letter-spacing: {{ block.settings.letter_spacing }}px;
    border-radius: {{ block.settings.border_radius }}px;
    border: {{ block.settings.border_width }}px solid {{ block.settings.border_color }};
    box-shadow: {{ block.settings.shadow_horizontal }}px {{ block.settings.shadow_vertical }}px {{ block.settings.shadow_blur }}px rgba(0, 0, 0, {{ block.settings.shadow_opacity | divided_by: 100.0 }});
    transition: all 0.3s ease;
    text-align: center;
    line-height: 1.2;
  }

  .ai-custom-tag-{{ ai_gen_id }}:hover {
    background: {{ block.settings.hover_background_color }};
    color: {{ block.settings.hover_text_color }};
    transform: translateY(-2px);
    box-shadow: {{ block.settings.shadow_horizontal }}px {{ block.settings.shadow_vertical | plus: 2 }}px {{ block.settings.shadow_blur | plus: 4 }}px rgba(0, 0, 0, {{ block.settings.shadow_opacity | divided_by: 100.0 | times: 1.2 }});
  }

  .ai-custom-tag__icon-{{ ai_gen_id }} {
    display: inline-flex;
    align-items: center;
    margin-right: 6px;
  }

  .ai-custom-tag__icon-{{ ai_gen_id }} svg {
    width: {{ block.settings.icon_size }}px;
    height: {{ block.settings.icon_size }}px;
    fill: currentColor;
  }

  .ai-custom-tag-wrapper-{{ ai_gen_id }} {
    display: inline-block;
    position: relative;
  }

  {% if block.settings.position == 'absolute' %}
    .ai-custom-tag-wrapper-{{ ai_gen_id }} {
      position: absolute;
      z-index: 10;
      
      {% if block.settings.vertical_position == 'top' %}
        top: {{ block.settings.offset_vertical }}px;
      {% else %}
        bottom: {{ block.settings.offset_vertical }}px;
      {% endif %}
      
      {% if block.settings.horizontal_position == 'left' %}
        left: {{ block.settings.offset_horizontal }}px;
      {% elsif block.settings.horizontal_position == 'right' %}
        right: {{ block.settings.offset_horizontal }}px;
      {% else %}
        left: 50%;
        transform: translateX(-50%);
      {% endif %}
    }
  {% endif %}

  @media screen and (max-width: 749px) {
    .ai-custom-tag-{{ ai_gen_id }} {
      font-size: {{ block.settings.font_size | times: 0.85 }}px;
      padding: {{ block.settings.padding_vertical | times: 0.8 }}px {{ block.settings.padding_horizontal | times: 0.8 }}px;
    }

    .ai-custom-tag__icon-{{ ai_gen_id }} svg {
      width: {{ block.settings.icon_size | times: 0.85 }}px;
      height: {{ block.settings.icon_size | times: 0.85 }}px;
    }
  }
{% endstyle %}

<div class="ai-custom-tag-wrapper-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-custom-tag-{{ ai_gen_id }}">
    {% if block.settings.show_icon %}
      <span class="ai-custom-tag__icon-{{ ai_gen_id }}">
        {% case block.settings.icon_type %}
          {% when 'star' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
            </svg>
          {% when 'fire' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M13.5 0.67s0.74 2.65 0.74 4.8c0 2.06-1.35 3.73-3.41 3.73-2.07 0-3.63-1.67-3.63-3.73l0.03-0.36C5.21 7.51 4 10.62 4 14c0 4.42 3.58 8 8 8s8-3.58 8-8C20 8.61 17.41 3.8 13.5 0.67zM11.71 19c-1.78 0-3.22-1.4-3.22-3.14 0-1.62 1.05-2.76 2.81-3.12 1.77-.36 3.6-1.21 4.62-2.58.39 1.29 0.59 2.65 0.59 4.04 0 2.65-2.15 4.8-4.8 4.8z"/>
            </svg>
          {% when 'tag' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M21.41 11.58l-9-9C12.05 2.22 11.55 2 11 2H4c-1.1 0-2 .9-2 2v7c0 .55.22 1.05.59 1.42l9 9c.36.36.86.58 1.41.58.55 0 1.05-.22 1.41-.59l7-7c.37-.36.59-.86.59-1.41 0-.55-.23-1.06-.59-1.42zM5.5 7C4.67 7 4 6.33 4 5.5S4.67 4 5.5 4 7 4.67 7 5.5 6.33 7 5.5 7z"/>
            </svg>
          {% when 'heart' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 21.35l-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"/>
            </svg>
          {% when 'gift' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M20 6h-2.18c.11-.31.18-.65.18-1 0-1.66-1.34-3-3-3-1.05 0-1.96.54-2.5 1.35l-.5.67-.5-.68C10.96 2.54 10.05 2 9 2 7.34 2 6 3.34 6 5c0 .35.07.69.18 1H4c-1.11 0-1.99.89-1.99 2L2 19c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V8c0-1.11-.89-2-2-2zm-5-2c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zM9 4c.55 0 1 .45 1 1s-.45 1-1 1-1-.45-1-1 .45-1 1-1zm11 15H4v-2h16v2zm0-5H4V8h5.08L7 10.83 8.62 12 11 8.76l1-1.36 1 1.36L15.38 12 17 10.83 14.92 8H20v6z"/>
            </svg>
          {% when 'lightning' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M7 2v11h3v9l7-12h-4l4-8z"/>
            </svg>
          {% when 'sparkle' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M12 2l2.4 7.2H22l-6 4.8 2.4 7.2L12 16.8 5.6 21.2 8 14l-6-4.8h7.6z"/>
            </svg>
          {% when 'check' %}
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"/>
            </svg>
        {% endcase %}
      </span>
    {% endif %}
    
    {% if block.settings.tag_text != blank %}
      {{ block.settings.tag_text }}
    {% else %}
      New
    {% endif %}
  </div>
</div>

{% schema %}
{
  "name": "Custom tag",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Content"
    },
    {
      "type": "text",
      "id": "tag_text",
      "label": "Tag text",
      "default": "New"
    },
    {
      "type": "checkbox",
      "id": "show_icon",
      "label": "Show icon",
      "default": false
    },
    {
      "type": "select",
      "id": "icon_type",
      "label": "Icon type",
      "options": [
        {
          "value": "star",
          "label": "Star"
        },
        {
          "value": "fire",
          "label": "Fire"
        },
        {
          "value": "tag",
          "label": "Tag"
        },
        {
          "value": "heart",
          "label": "Heart"
        },
        {
          "value": "gift",
          "label": "Gift"
        },
        {
          "value": "lightning",
          "label": "Lightning"
        },
        {
          "value": "sparkle",
          "label": "Sparkle"
        },
        {
          "value": "check",
          "label": "Check"
        }
      ],
      "default": "star"
    },
    {
      "type": "range",
      "id": "icon_size",
      "min": 10,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Icon size",
      "default": 14
    },
    {
      "type": "header",
      "content": "Position"
    },
    {
      "type": "select",
      "id": "position",
      "label": "Position type",
      "options": [
        {
          "value": "inline",
          "label": "Inline"
        },
        {
          "value": "absolute",
          "label": "Absolute"
        }
      ],
      "default": "inline",
      "info": "Absolute positioning places the tag over content"
    },
    {
      "type": "select",
      "id": "vertical_position",
      "label": "Vertical position",
      "options": [
        {
          "value": "top",
          "label": "Top"
        },
        {
          "value": "bottom",
          "label": "Bottom"
        }
      ],
      "default": "top"
    },
    {
      "type": "select",
      "id": "horizontal_position",
      "label": "Horizontal position",
      "options": [
        {
          "value": "left",
          "label": "Left"
        },
        {
          "value": "center",
          "label": "Center"
        },
        {
          "value": "right",
          "label": "Right"
        }
      ],
      "default": "left"
    },
    {
      "type": "range",
      "id": "offset_vertical",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Vertical offset",
      "default": 12
    },
    {
      "type": "range",
      "id": "offset_horizontal",
      "min": 0,
      "max": 100,
      "step": 4,
      "unit": "px",
      "label": "Horizontal offset",
      "default": 12
    },
    {
      "type": "header",
      "content": "Typography"
    },
    {
      "type": "range",
      "id": "font_size",
      "min": 10,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Font size",
      "default": 12
    },
    {
      "type": "select",
      "id": "font_weight",
      "label": "Font weight",
      "options": [
        {
          "value": "400",
          "label": "Normal"
        },
        {
          "value": "500",
          "label": "Medium"
        },
        {
          "value": "600",
          "label": "Semi bold"
        },
        {
          "value": "700",
          "label": "Bold"
        },
        {
          "value": "800",
          "label": "Extra bold"
        }
      ],
      "default": "700"
    },
    {
      "type": "select",
      "id": "text_transform",
      "label": "Text transform",
      "options": [
        {
          "value": "none",
          "label": "None"
        },
        {
          "value": "uppercase",
          "label": "Uppercase"
        },
        {
          "value": "lowercase",
          "label": "Lowercase"
        },
        {
          "value": "capitalize",
          "label": "Capitalize"
        }
      ],
      "default": "uppercase"
    },
    {
      "type": "range",
      "id": "letter_spacing",
      "min": 0,
      "max": 3,
      "step": 0.5,
      "unit": "px",
      "label": "Letter spacing",
      "default": 0.5
    },
    {
      "type": "header",
      "content": "Spacing"
    },
    {
      "type": "range",
      "id": "padding_vertical",
      "min": 2,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Vertical padding",
      "default": 6
    },
    {
      "type": "range",
      "id": "padding_horizontal",
      "min": 4,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Horizontal padding",
      "default": 12
    },
    {
      "type": "header",
      "content": "Style"
    },
    {
      "type": "range",
      "id": "border_radius",
      "min": 0,
      "max": 30,
      "step": 2,
      "unit": "px",
      "label": "Border radius",
      "default": 4
    },
    {
      "type": "range",
      "id": "border_width",
      "min": 0,
      "max": 4,
      "step": 1,
      "unit": "px",
      "label": "Border width",
      "default": 0
    },
    {
      "type": "color",
      "id": "border_color",
      "label": "Border color",
      "default": "#000000"
    },
    {
      "type": "header",
      "content": "Colors"
    },
    {
      "type": "color",
      "id": "background_color",
      "label": "Background",
      "default": "#d82c0d"
    },
    {
      "type": "color",
      "id": "text_color",
      "label": "Text",
      "default": "#ffffff"
    },
    {
      "type": "color",
      "id": "hover_background_color",
      "label": "Hover background",
      "default": "#b82409"
    },
    {
      "type": "color",
      "id": "hover_text_color",
      "label": "Hover text",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Shadow"
    },
    {
      "type": "range",
      "id": "shadow_opacity",
      "min": 0,
      "max": 100,
      "step": 5,
      "unit": "%",
      "label": "Shadow opacity",
      "default": 20
    },
    {
      "type": "range",
      "id": "shadow_horizontal",
      "min": -10,
      "max": 10,
      "step": 1,
      "unit": "px",
      "label": "Shadow horizontal",
      "default": 0
    },
    {
      "type": "range",
      "id": "shadow_vertical",
      "min": 0,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Shadow vertical",
      "default": 2
    },
    {
      "type": "range",
      "id": "shadow_blur",
      "min": 0,
      "max": 20,
      "step": 2,
      "unit": "px",
      "label": "Shadow blur",
      "default": 4
    }
  ],
  "presets": [
    {
      "name": "Custom tag"
    }
  ]
}
{% endschema %}